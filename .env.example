############################
# Application Settings
############################
APP_VERSION=0.1.0
DEBUG=true
ENVIRONMENT=development
SERVICE_NAME=rag-api


############################
# PostgreSQL Database Configuration
############################
POSTGRES_USER=paperlens
POSTGRES_PASSWORD=paperlens
POSTGRES_DB=PaperLens_DB

POSTGRES_DATABASE_URL=postgresql://paperlens:paperlens@postgres:5432/PaperLens_DB

POSTGRES_ECHO_SQL=false
POSTGRES_POOL_SIZE=20
POSTGRES_MAX_OVERFLOW=0


############################
# OpenSearch Configuration
############################
OPENSEARCH_HOST=http://opensearch:9200
OPENSEARCH__HOST=http://opensearch:9200

OPENSEARCH__INDEX_NAME=arxiv-papers
OPENSEARCH__CHUNK_INDEX_SUFFIX=chunks
OPENSEARCH__MAX_TEXT_SIZE=1000000

# Vector Search
OPENSEARCH__VECTOR_DIMENSION=1024
OPENSEARCH__VECTOR_SPACE_TYPE=cosinesimil

# Hybrid Search (RRF)
OPENSEARCH__RRF_PIPELINE_NAME=hybrid-rrf-pipeline
OPENSEARCH__HYBRID_SEARCH_SIZE_MULTIPLIER=2


############################
# arXiv API Configuration
############################
ARXIV__BASE_URL=https://export.arxiv.org/api/query
ARXIV__PDF_CACHE_DIR=./data/arxiv_pdfs
ARXIV__RATE_LIMIT_DELAY=3.0
ARXIV__TIMEOUT_SECONDS=30
ARXIV__MAX_RESULTS=50
ARXIV__SEARCH_CATEGORIES=["cs.AI"]

ARXIV__DOWNLOAD_MAX_RETRIES=3
ARXIV__DOWNLOAD_RETRY_DELAY_BASE=5.0
ARXIV__MAX_CONCURRENT_DOWNLOADS=3
ARXIV__MAX_CONCURRENT_PARSING=1


############################
# PDF Parser Configuration
############################
PDF_PARSER__MAX_PAGES=30
PDF_PARSER__MAX_FILE_SIZE_MB=20
PDF_PARSER__DO_OCR=false
PDF_PARSER__DO_TABLE_STRUCTURE=true


############################
# NVIDIA NIM Configuration
#
# NOTE:
# If NVIDIA_API_KEY is NOT provided:
# - LLM-backed RAG generation will not function
############################
NVIDIA_BASE_URL=https://api.nvidia.com
NVIDIA_API_KEY=
NVIDIA_TIMEOUT=300


############################
# Airflow Configuration
############################
AIRFLOW__CORE__EXECUTOR=LocalExecutor
AIRFLOW__CORE__LOAD_EXAMPLES=false
AIRFLOW__WEBSERVER__EXPOSE_CONFIG=true
AIRFLOW__HOME=/opt/airflow

AIRFLOW__EMAIL=admin@paperlens.local
AIRFLOW__PASSWORD=admin

AIRFLOW_DB_USER=airflow
AIRFLOW_DB_PASSWORD=airflow
AIRFLOW_DB_NAME=airflow_db

AIRFLOW__DATABASE__SQL_ALCHEMY_CONN=postgresql://airflow:airflow@postgres:5432/airflow_db


############################
# Text Chunking Configuration
############################
CHUNKING__CHUNK_SIZE=600
CHUNKING__OVERLAP_SIZE=100
CHUNKING__MIN_CHUNK_SIZE=100
CHUNKING__SECTION_BASED=true


############################
# Jina AI Embeddings Configuration
#
# NOTE:
# If JINA_API_KEY is NOT provided:
# - Hybrid (dense + sparse) search will be DISABLED
# - The system will fallback to sparse / keyword-based retrieval only
############################
JINA_API_KEY=

